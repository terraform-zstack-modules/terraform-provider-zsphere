---
page_title: "zsphere_instance Resource - zsphere"
subcategory: ""
description: |-
    This resource allows you to manage virtual machine (VM) instances in ZStack. A VM instance represents a virtualized compute resource that can be created, updated, and deleted. You can define the VM's properties, such as its name, image, network configuration, disks, and GPU devices.
---

# zsphere_instance (Resource)

This resource allows you to manage virtual machine (VM) instances in ZStack. A VM instance represents a virtualized compute resource that can be created, updated, and deleted. You can define the VM's properties, such as its name, image, network configuration, disks, and GPU devices.

## Example Usage

```terraform
data "zsphere_images" "images" {
  name = "jiajian-test-from-terraform"
}

data "zsphere_port_groups" "networks" {
  name = "Pub-network-勿删"
}


resource "zsphere_instance" "vm" {
  name        = "vm_instance_from_terraform"
  description = "create a vm from terraform"
  image_uuid  = data.zsphere_images.images.images.0.uuid #"${data.zstack_images.images.images[0].uuid}" #"9b26312501614ec0b6dc731e6977dfb2"
  expunge     = true
  memory_size = 4096
  cpu_num     = 4

  data_disks = [
    {
      size = 10
    }
  ]
  network_interfaces = [
    {
      port_group_uuid = data.zsphere_port_groups.networks.port_groups.0.uuid
      default_l3      = true
      # static_ip       = "172.30.3.154"
    }
  ]

}

output "zsphere_instance" {
  value = zsphere_instance.vm
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `image_uuid` (String) The UUID of the image used to create the VM instance.
- `name` (String) The name of the VM instance.

### Optional

- `cluster_uuid` (String) The UUID of the cluster where the VM instance is deployed.
- `cpu_num` (Number) The number of CPUs allocated to the VM instance.  When used together with `memory_size`, the `instance_offering_uuid` is not required.
- `data_disks` (Attributes List) The configuration for additional data disks. (see [below for nested schema](#nestedatt--data_disks))
- `datacenter_uuid` (String) The UUID of the zone where the VM instance is deployed.
- `description` (String) A description of the VM instance.
- `expunge` (Boolean) Indicates if the instance should be expunged after deletion.
- `host_uuid` (String) The UUID of the host where the VM instance is running.
- `memory_size` (Number) The memory size allocated to the VM instance in megabytes (MB). When used together with `cpu_num`, the `instance_offering_uuid` is not required.
- `network_interfaces` (Attributes List) Defines network interfaces attached to the VM. Each NIC corresponds to an L3 network, and optionally configures a static IP. (see [below for nested schema](#nestedatt--network_interfaces))
- `never_stop` (Boolean) Whether the VM instance should never stop automatically.
- `root_disk` (Attributes) The configuration for the root disk of the VM instance. (see [below for nested schema](#nestedatt--root_disk))
- `strategy` (String) The deployment strategy for the VM instance.
- `user_data` (String) User data injected into the VM instance at boot time.

### Read-Only

- `uuid` (String) The unique identifier of the VM instance.
- `vm_nics` (Attributes List) The IP address assigned to the VM instance. (see [below for nested schema](#nestedatt--vm_nics))

<a id="nestedatt--data_disks"></a>
### Nested Schema for `data_disks`

Optional:

- `ceph_pool_name` (String) The Ceph pool name for the data disk.
- `size` (Number) The size of the data disk in gigabytes (GB).
- `virtio_scsi` (Boolean) Whether the data disk uses Virtio-SCSI.

Read-Only:

- `primary_storage_uuid` (String) The UUID of the primary storage for the data disk.


<a id="nestedatt--network_interfaces"></a>
### Nested Schema for `network_interfaces`

Required:

- `default_l3` (Boolean) Whether this NIC is the default route NIC.
- `port_group_uuid` (String) The UUID of the L3 network for this NIC.

Optional:

- `static_ip` (String) Static IP address to assign. The format will be converted to system tag `staticIp::<l3_uuid>::<ip>`.


<a id="nestedatt--root_disk"></a>
### Nested Schema for `root_disk`

Optional:

- `ceph_pool_name` (String) The Ceph pool name for the root disk.
- `primary_storage_uuid` (String) The UUID of the primary storage for the root disk.
- `size` (Number) The size of the root disk in gigabytes (GB).
- `virtio_scsi` (Boolean) Whether the root disk uses Virtio-SCSI.


<a id="nestedatt--vm_nics"></a>
### Nested Schema for `vm_nics`

Required:

- `uuid` (String) The UUID of the network.

Read-Only:

- `gateway` (String) The gateway of the network.
- `ip` (String) The IP address assigned to the network.
- `netmask` (String) The netmask of the network.



